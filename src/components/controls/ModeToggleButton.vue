<template>
  <button class="icon-button" :class="{ 'dark-button': store.darkTheme, disabled: props.disabled }" @click="debouncedToggleMode" :disabled="props.disabled">
    <svg
      v-if="store.isInStationsMode"
      version="1.1"
      id="Layer_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      style="enable-background:new 0 0 512 512;"
      xml:space="preserve"
      fill="currentColor"
    >
      <g>
        <g>
          <path
            d="M501.556,423.088h-20.102V268.135h6.615c13.052,0,23.672-10.619,23.672-23.673v-81.749
            c0-13.054-10.619-23.673-23.672-23.673h-34.116c-13.054,0-23.673,10.619-23.673,23.673v81.749
            c0,13.054,10.619,23.673,23.673,23.673h6.614v154.953H413.57V270.719v-3.22V132.862h27.154c5.767,0,10.444-4.676,10.444-10.444
            c0-29.993-24.128-54.394-53.785-54.394H53.785C24.128,68.023,0,92.425,0,122.418c0,5.768,4.677,10.444,10.444,10.444h27.154
            v134.637v3.22v152.369H10.703c-5.767,0-10.444,4.676-10.444,10.444s4.677,10.444,10.444,10.444h490.854
            c5.767,0,10.444-4.676,10.444-10.444S507.324,423.088,501.556,423.088z M22.523,111.974c4.318-13.377,16.702-23.063,31.262-23.063
            h343.598c14.561,0,26.944,9.684,31.262,23.063H22.523z M228.198,176.39c-4.079-4.078-10.69-4.078-14.771,0l-83.723,83.724
            c-0.052,0.052-0.095,0.109-0.146,0.161H58.485V132.862H332.44L205.026,260.275h-45.944l69.115-69.115
            C232.276,187.082,232.276,180.469,228.198,176.39z M330.892,423.088H120.255v-19.843h210.637V423.088z M89.904,382.358v-8.355
            h271.362v8.355H89.904z M392.683,423.088h-40.904v-19.843h19.93c5.767,0,10.444-4.676,10.444-10.444v-29.242
            c0-5.768-4.677-10.444-10.444-10.444H79.46c-5.767,0-10.444,4.676-10.444,10.444v29.242c0,5.768,4.677,10.444,10.444,10.444
            h19.909v19.843H58.485V281.163h334.198V423.088z M392.683,260.275H234.568l127.413-127.413h30.702V260.275z M453.953,247.249
            c-1.536-0.001-2.785-1.25-2.785-2.785v-81.749c0-1.536,1.249-2.785,2.785-2.785h34.116c1.535,0,2.784,1.249,2.784,2.785v81.749
            c0,1.535-1.249,2.785-2.784,2.785H453.953z" />
        </g>
      </g>
      <g>
        <g>
          <path
            d="M252.206,152.422c-4.068-4.091-10.681-4.107-14.771-0.04l-0.097,0.096c-4.089,4.068-4.107,10.681-0.039,14.769
            c2.041,2.052,4.722,3.079,7.405,3.079c2.664,0,5.328-1.013,7.366-3.039l0.097-0.096
            C256.256,163.124,256.274,156.511,252.206,152.422z" />
        </g>
      </g>
    </svg>

    <svg v-else viewBox="0 0 410.52 410.52" style="enable-background:new 0 0 410.52 410.52;" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
      <g>
        <path d="M98.644,275.387c-11.369,0-20.618,9.249-20.618,20.618c0,11.369,9.25,20.618,20.618,20.618s20.618-9.249,20.618-20.618 C119.262,284.636,110.012,275.387,98.644,275.387z M98.644,301.623c-3.098,0-5.618-2.521-5.618-5.618s2.521-5.618,5.618-5.618 s5.618,2.52,5.618,5.618S101.741,301.623,98.644,301.623z" />
        <path d="M311.876,275.387c-11.369,0-20.618,9.249-20.618,20.618c0,11.369,9.25,20.618,20.618,20.618s20.618-9.249,20.618-20.618 C332.495,284.636,323.245,275.387,311.876,275.387z M311.876,301.623c-3.098,0-5.618-2.521-5.618-5.618s2.521-5.618,5.618-5.618 s5.618,2.52,5.618,5.618S314.974,301.623,311.876,301.623z" />
        <path d="M401,259.826v-70.374v-76.644c0-23.871-19.421-43.292-43.292-43.292H76.773c-37.083,0-67.253,30.17-67.253,67.253v123.056 C3.744,264.164,0,271.071,0,278.836v0.92c0,13.096,10.654,23.75,23.75,23.75h30.533c3.583,21.253,22.105,37.497,44.361,37.497 s40.778-16.244,44.361-37.497h124.511c3.583,21.253,22.105,37.497,44.361,37.497s40.778-16.244,44.361-37.497h30.533 c13.096,0,23.75-10.654,23.75-23.75v-0.92C410.52,271.071,406.776,264.164,401,259.826z M386,181.952h-20.583 c-1.053,0-1.91-0.856-1.91-1.91v-57.824c0-1.053,0.856-1.91,1.91-1.91H386V181.952z M15,279.756v-0.92c0-4.83,3.925-8.76,8.75-8.76 h38.151c-3.817,5.393-6.477,11.655-7.619,18.43H23.75C18.925,288.506,15,284.581,15,279.756z M98.644,326.003 c-16.541,0-29.998-13.458-29.998-29.999s13.457-29.998,29.998-29.998s29.998,13.457,29.998,29.998S115.185,326.003,98.644,326.003z M267.515,288.506h-124.51c-3.582-21.254-22.105-37.5-44.361-37.5c-6.657,0-12.974,1.464-18.665,4.07H24.52V136.77 c0-28.813,23.441-52.253,52.253-52.253h280.935c13.003,0,23.979,8.821,27.275,20.792h-19.567c-9.324,0-16.91,7.585-16.91,16.91 v57.824c0,9.324,7.585,16.91,16.91,16.91H386v58.125h-55.459c-5.69-2.605-12.008-4.07-18.665-4.07 C289.62,251.007,271.097,267.253,267.515,288.506z M311.876,326.003c-16.541,0-29.998-13.458-29.998-29.999 s13.457-29.998,29.998-29.998s29.998,13.457,29.998,29.998S328.417,326.003,311.876,326.003z M395.52,279.756 c0,4.825-3.925,8.75-8.75,8.75h-30.532c-1.142-6.775-3.802-13.037-7.619-18.43h38.151c4.825,0,8.75,3.93,8.75,8.76V279.756z" />
        <path d="M326.377,180.042v-57.824c0-9.324-7.585-16.91-16.91-16.91H78.542c-19.952,0-36.184,16.232-36.184,36.184v38.55 c0,9.324,7.585,16.91,16.91,16.91h250.2C318.792,196.952,326.377,189.366,326.377,180.042z M191.868,120.308h58.961v61.644h-58.961 V120.308z M176.868,181.952h-58.96v-61.644h58.96V181.952z M57.358,180.042v-38.55c0-11.681,9.503-21.184,21.184-21.184h24.366 v61.644h-43.64C58.214,181.952,57.358,181.095,57.358,180.042z M311.377,180.042c0,1.053-0.856,1.91-1.91,1.91h-43.639v-61.644 h43.639c1.053,0,1.91,0.856,1.91,1.91V180.042z" />
        <path d="M369.537,243.413c4.142,0,7.5-3.358,7.5-7.5v-6.667c0-4.142-3.358-7.5-7.5-7.5s-7.5,3.358-7.5,7.5v6.667 C362.037,240.055,365.395,243.413,369.537,243.413z" />

        <rect x="20.088" y="183.559" width="371.444" height="76.27" style="stroke: currentColor" />
        <rect x="38.428" y="83.01" width="348.498" height="36.363" style="stroke: currentColor" />
        <rect x="23.563" y="102.221" width="28.193" height="90.436" style="stroke: currentColor" />
        <rect x="130.279" y="264.062" width="146.467" height="31.019" style="stroke: currentColor" />
        <rect x="123.391" y="256.051" width="162.391" height="12.866" style="stroke: currentColor" />
      </g>
    </svg>

  </button>
</template>

<script setup>
import { debounce } from 'debounce';
import { usePreferencesStore } from '@/stores/preferences';

const props = defineProps({
  disabled: {
    type: Boolean,
    default: false,
  },
});

const store = usePreferencesStore();

const debouncedToggleMode = debounce(store.toggleMode, 300, true);

</script>

<style scoped>
.icon-button {
  display: block;
  padding: 12px;
  height: 60px;
  width: 60px;
  background: none;
  border: none;
  border-radius: 50%;
  color: rgb(255, 255, 255);
  background-color: rgba(129, 129, 129, 0.5);
}

.dark-button {
  background: rgba(0,0,0,0.5);
  filter: drop-shadow(0px 0px 5px #ffffff);
}

.disabled {
  background: gray;
  opacity: 0.2
}
</style>
